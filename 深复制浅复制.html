<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <script>
        let arr = [{
            name: "小明",
            age: 18,
            obj: {
                city: "郑州",
            },
        },
            10,
            20,
            30,
        ];
        // let arr2 = [...arr];
        // let arr2 = arr.concat();
        // let arr2 = Object.assign({}, arr);
        // arr[0].name = "小丽";

        // console.log(arr, arr2);

        let arr2 = JSON.parse(JSON.stringify(arr));
        arr[0].name = "小丽";
        console.log(arr, arr2);
        //深拷贝

        // let res=[];
        let obj = {
            name: "小明",
            age: 10,
            list: {
                friend: "夏利",
            },
            chidren: [{
                city: "郑州",
            }, {
                city: "北京",
                children: [{
                    from: "上海",
                },],
            },],
        };

        // let res = {};
        // for (const key in obj) {
        //     if (obj[key] instanceof Object) {
        //         for (const i in obj[key]) {
        //             if (obj[key][i] instanceof Object) {
        //                 // const element = object[key];
        //             } else {
        //                 console.log(obj[key][i]);
        //                 // res[key][i] = obj[key][i];
        //             }
        //         }
        //     } else {
        //         res[key] = obj[key];
        //         // console.log(res[key]);
        //     }
        // }
        // console.log(res);
        // 这里循环这个对象 是基本数据类型的直接复制 如果是复杂的就还要循环知道找到基本数据类型复制 但是不知道要循环多少层 所以这里用递归 自身调用自身

        function deepcopy(obj) {
            let res = {};
            // if (obj instanceof Array) {
            //     res = [];
            // } else {
            //     res = {};
            // }
            //保存复制之后的数据 如果是对象 就初始化一个对象 如果是数组就初始化一个数组
            for (const key in obj) {
                if (obj[key] instanceof Object) {
                    res[key] = deepcopy(obj[key]);
                    //自身调用自身 如果是复杂数据类型就重新进行复制
                } else {
                    res[key] = obj[key];
                }
            }
            return res;
        }
        let obj2 = deepcopy(obj);
        console.log(obj2);
        let arr3 = deepcopy(arr);
        console.log(arr3);
    </script>
</body>

</html>